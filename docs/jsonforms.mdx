---
id: jsonforms
title: Formularios JSON en el Asistente de Configuración
sidebar_label: Formularios JSON y asistente de configuración
description: Puede personalizar la experiencia de despliegue de sus clientes utilizando formularios JSON en el asistente de configuración.
---

import Screenshot from "@site/src/components/screenshot";
import JsonFormsExampleButton from "@site/src/components/json-forms-example-button";

JSON Forms ayuda a personalizar la experiencia de implementación para tus clientes.
Te permite agregar uno o muchos campos personalizados al asistente de configuración al definir un esquema JSON y un esquema de interfaz de usuario (UI schema).

Este artículo describe cómo se pueden utilizar JSON Forms en el [asistente de configuración](configuration-wizard.mdx) para proporcionar a tus clientes una experiencia de implementación personalizada.
Consulta el [JSON Forms Playground](/jsonforms/playground/) para ver varios ejemplos de JSON Forms en acción.

Varios ejemplos adicionales se pueden encontrar en la [documentación](https://jsonforms.io/) del proyecto JSON Forms.

## Esquema y esquema de interfaz de usuario (UI schema)

Un formulario JSON se define mediante `schema`, que es el modelo de datos (la forma de los datos que esperas que se devuelvan), y `uiSchema`, que describe cómo se deben representar diversos campos de entrada.

Un esquema simple (`schema`) podría verse así:

```json title="Ejemplo de esquema JSON"
{
  "type": "object",
  "properties": {
    "companyName": {
      "type": "string"
    },
    "companyDescription": {
      "type": "string",
      "description": "Aquí puede introducir varias líneas"
    },
    "numEmployees": {
      "type": "integer",
      "description": "Incluir a los empleados de todas las oficinas"
    },
    "continent": {
      "type": "string",
      "enum": [
        "North America",
        "South America",
        "Europe",
        "Asia",
        "Africa",
        "Australia"
      ]
    },
    "biDirectionalSync": {
      "type": "boolean"
    }
  },
  "required": ["companyName"]
}
```

En el ejemplo anterior, declaramos que este formulario JSON devolverá un objeto con cinco propiedades: `companyName`, `companyDescription`, `numEmployees`, `continent` y `biDirectionalSync`.
El nombre de la empresa es obligatorio, pero los otros campos son opcionales.
El campo `companyDescription` es una cadena, y el campo `numEmployees` es un número entero.
El campo `continent` es una cadena, pero solo puede ser uno de los valores en la matriz `enum`.
El campo `biDirectionalSync` es un booleano.


Este formulario JSON devolverá un objeto como este:

```json title="Ejemplo de datos de formulario JSON"
{
  "companyName": "Acme Corp",
  "companyDescription": "We make everything",
  "numEmployees": 100,
  "continent": "North America",
  "biDirectionalSync": true
}
```

Para renderizar este formulario, necesitamos definir un `uiSchema` que describa cómo se deben representar los campos.
Un `uiSchema` podría verse algo así:


```json title="Esquema de interfaz de usuario simple"
{
  "type": "VerticalLayout",
  "elements": [
    {
      "type": "Control",
      "scope": "#/properties/companyName"
    },
    {
      "type": "Control",
      "scope": "#/properties/companyDescription",
      "options": {
        "multi": true
      }
    },
    {
      "type": "Control",
      "label": "Employee Count",
      "scope": "#/properties/numEmployees"
    },
    {
      "type": "Control",
      "scope": "#/properties/continent"
    },
    {
      "type": "Control",
      "label": "Sync Data Bi-Directionally?",
      "scope": "#/properties/biDirectionalSync"
    }
  ]
}
```

En el ejemplo anterior, declaramos que el formulario se debe representar como un diseño vertical y que los campos se deben renderizar en el orden en que se definen en la matriz `elements`.
Se agregaron algunas etiquetas opcionales para anular las etiquetas predeterminadas que se derivan de los nombres de las propiedades.


<Screenshot
  filename="json-forms/basic-form.png"
  alt="Captura de pantalla de un formulario JSON básico"
  maxWidth="600px"
/>

<JsonFormsExampleButton exampleKey="basic" />

## Tipos de campos en formularios JSON

JSON Forms admite varios tipos de campos de entrada, incluidas cadenas simples, casillas de verificación o interruptores booleanos, números, selectores de fecha y hora, y más.
Tenga en cuenta que los campos de hora y fecha y hora son campos de tipo `string` con una propiedad de formato `time` o `date-time`.


```json title="Ejemplos de campos en formularios JSON"
{
  "type": "object",
  "properties": {
    "string": {
      "type": "string"
    },
    "boolean": {
      "type": "boolean",
      "description": "Boolean description as a tooltip"
    },
    "number": {
      "type": "number"
    },
    "integer": {
      "type": "integer"
    },
    "date": {
      "type": "string",
      "format": "date"
    },
    "time": {
      "type": "string",
      "format": "time"
    },
    "dateTime": {
      "type": "string",
      "format": "date-time"
    }
  }
}
```

## Esquema de la interfaz de usuario

Los elementos de interfaz de usuario se pueden organizar horizontal o verticalmente, y los diseños pueden estar anidados.
En este ejemplo, un `HorizontalLayout` contiene dos elementos `VerticalLayout`.
El segundo elemento de diseño vertical es un diseño de tipo `Group`, que agrega un contenedor y una `label` alrededor de los elementos de entrada organizados verticalmente.


```json title="Diseños anidados" {2,5,18-19}
{
  "type": "HorizontalLayout",
  "elements": [
    {
      "type": "VerticalLayout",
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/companyName"
        },
        {
          "type": "Control",
          "scope": "#/properties/companyDescription"
        }
      ]
    },
    {
      "type": "Group",
      "label": "Additional Data",
      "elements": [
        {
          "type": "Control",
          "label": "Employee Count",
          "scope": "#/properties/numEmployees"
        },
        {
          "type": "Control",
          "scope": "#/properties/continent"
        }
      ]
    }
  ]
}
```

<Screenshot
  filename="json-forms/nested-layouts.png"
  alt="Captura de pantalla de diseños anidados en formularios JSON"
  maxWidth="600px"
/>

<JsonFormsExampleButton exampleKey="nested-layouts" />

## Menús desplegables en formularios JSON

Si desea presentar a su cliente un menú desplegable de opciones predefinidas, puede utilizar una propiedad `enum` o `oneOf` en su esquema.

Un `enum` se puede utilizar para seleccionar uno de un conjunto de valores de cadena:


```json title="Example using enum"
{
  "type": "object",
  "properties": {
    "continent": {
      "type": "string",
      "enum": [
        "North America",
        "South America",
        "Europe",
        "Asia",
        "Africa",
        "Australia"
      ]
    }
  }
}
```

<Screenshot
  filename="json-forms/enum.png"
  alt="Screenshot of dropdown menu in JSON forms"
  maxWidth="600px"
/>

In this case, if someone selects "North America", the data presented to the integration will be `{ continent: "North America" }`.

`oneOf` is handy if you would like to present a dropdown menu with human-readable labels, but you want to return a different value or to the integration.
In this example, the same dropdown menu is presented, but the data returned to the integration will be the two-letter continent code (i.e. "NA" for North America):

```json title="Example using oneOf"
{
  "type": "object",
  "properties": {
    "continent": {
      "type": "string",
      "oneOf": [
        {
          "title": "North America",
          "const": "NA"
        },
        {
          "title": "South America",
          "const": "SA"
        },
        {
          "title": "Europe",
          "const": "EU"
        },
        {
          "title": "Asia",
          "const": "AS"
        },
        {
          "title": "Africa",
          "const": "AF"
        },
        {
          "title": "Australia",
          "const": "AU"
        }
      ]
    }
  }
}
```

## Arrays of fields in JSON Forms

Arrays allow your users to specify values for several copies of a set of fields.
In this example, two fields (`channel` which is a `string` and `notifications` which is a dropdown menu) are properties of an object.
The object can be represented one or many times within an `array` named `slackChannels`.

```json title="Example of an array" {5}
{
  "type": "object",
  "properties": {
    "slackChannels": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "channel": {
            "type": "string"
          },
          "notifications": {
            "type": "string",
            "enum": [
              "Opportunity Created",
              "Opportunity Updated",
              "Opportunity Closed/Won",
              "Opportunity Closed/Lost"
            ]
          }
        }
      }
    }
  }
}
```

You can optionally choose to display sort buttons, so a customer user can reorder the array elements within the `uiSchema`:

```json title="Example UI Schema" {7-9}
{
  "type": "VerticalLayout",
  "elements": [
    {
      "type": "Control",
      "scope": "#/properties/slackChannels",
      "options": {
        "showSortButtons": true
      }
    }
  ]
}
```

<Screenshot
  filename="json-forms/basic-array.png"
  alt="Screenshot of a basic array in JSON forms"
  maxWidth="600px"
/>

Arrays are presented to the integration as a list of objects:

```json
{
  "slackChannels": [
    {
      "channel": "#sales-opportunities",
      "notifications": "Opportunity Created"
    },
    {
      "channel": "#sales-opportunities",
      "notifications": "Opportunity Updated"
    },
    {
      "channel": "#sales-opportunities-won",
      "notifications": "Opportunity Closed/Won"
    },
    {
      "channel": "#sales-opportunities-lost",
      "notifications": "Opportunity Closed/Lost"
    }
  ]
}
```

<JsonFormsExampleButton exampleKey="basic-array" />

Arrays can be presented in an `Accordion` layout to save space in the configuration wizard.
The field used to derive the accordion labels can be specified with the `elementLabelProp` option:

```json title="Accordion layout UI Schema" {7-11}
{
  "type": "VerticalLayout",
  "elements": [
    {
      "type": "Control",
      "scope": "#/properties/slackChannels",
      "options": {
        "layout": "Accordion",
        "elementLabelProp": "channel",
        "showSortButtons": true
      }
    }
  ]
}
```

<Screenshot
  filename="json-forms/basic-array-accordion.png"
  alt="Screenshot of a basic array in JSON forms"
  maxWidth="600px"
/>

<JsonFormsExampleButton exampleKey="basic-array-accordion" />

### Data mapping with JSON Forms

Arrays are especially helpful when building a data mapping UI.
See the [Building a Field Mapper Data Source](quickstarts/field-mapping-json-forms-datasource.mdx) tutorial for an example of how to build a data mapper between custom fields in Salesforce, and custom fields in your app.

<JsonFormsExampleButton exampleKey="data-mapper-accordion" />

## Showing or hiding inputs with UI Rules

You can choose to show or hide fields conditionally based on the value of other fields.
A `rule` is defined in UI schema and contains a `condition` that determines wheter or not an `effect` should be applied.

In this example, the `convertToUSD` input field is only shown if the value of the `country` field is _not_ `United States`:

```json {7-17}
{
  "type": "Control",
  "scope": "#/properties/convertToUSD",
  "options": {
    "toggle": true
  },
  "rule": {
    "effect": "SHOW",
    "condition": {
      "scope": "#/properties/country",
      "schema": {
        "not": {
          "const": "United States"
        }
      }
    }
  }
}
```

<JsonFormsExampleButton exampleKey="ui-rules" />

Additional examples are available in JSON Forms' [documentation](https://jsonforms.io/docs/uischema/rules)

## Input validation in JSON Forms

You can validate what your customers enter into input fields by adding `format`, `minimum`, `maximum`, `maxLength` and other properties to your schema.
For string inputs, a `pattern` property allows you to specify a [regular expression](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions) (regex) pattern that values must adhere to - this is useful if you are expecting a very specific format of user-supplied input.

```json title="Examples of input validation"
{
  "type": "object",
  "properties": {
    "stringMinLength": {
      "type": "string",
      "minLength": 5,
      "description": "Please enter a string with at least 5 characters"
    },
    "stringMaxLength": {
      "type": "string",
      "maxLength": 5,
      "description": "Please enter a string with at most 5 characters"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Please enter a valid email address."
    },
    "uri": {
      "type": "string",
      "format": "uri",
      "description": "Please enter a valid URI."
    },
    "ipv4": {
      "type": "string",
      "format": "ipv4",
      "description": "Please enter a valid IPv4 address."
    },
    "regex": {
      "type": "string",
      "pattern": "^(\\([0-9]{3}\\))?[0-9]{3}-[0-9]{4}$",
      "description": "Please enter a valid phone number in the form (123)456-7890."
    },
    "intOneTen": {
      "type": "integer",
      "minimum": 1,
      "maximum": 10,
      "description": "Please enter an integer between 1 and 10."
    },
    "startDate": {
      "type": "string",
      "format": "date",
      "description": "Please enter a date between the first and last day of the current month.",
      "formatMinimum": "2023-08-01",
      "formatMaximum": "2023-08-31"
    }
  },
  "required": [
    "stringMinLength",
    "stringMaxLength",
    "email",
    "uri",
    "ipv4",
    "regex",
    "intOneTen",
    "startDate"
  ]
}
```

<JsonFormsExampleButton exampleKey="input-validation" />

## Wrapping JSON Forms in a custom component

If your form is static and does not depend on fetching data from third-party apps before it renders, you can provide `schema` and `uiSchema` directly to the [JSONForms component](components/jsonforms.mdx) for rendering.
If you would like your form to present dropdown menus and other fields that are sourced from a third-party app, you can build a form in a custom component using the custom component SDK (see [documentation](custom-components/writing-custom-components.mdx#json-forms-data-sources)).

### Pre-filling default data

In addition to `schema` and `uiSchema` properties, your custom JSON Forms data sources can include a `data` property.
When `data` is included, your form will be pre-filled with the data you provide.
